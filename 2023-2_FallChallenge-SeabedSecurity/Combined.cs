/**************************************************************
  This file was generated by FileConcatenator.
  It combined all classes in the project to work in Codingame.
***************************************************************/

using System.Drawing;
using System;
using System.Collections.Generic;
using System.Linq;
using System.IO;
using System.Text;
using System.Collections;
using System.Runtime.CompilerServices;

internal class Creature
{
    internal int Id { get; private set; }
    internal int Color { get; private set; }
    internal int Type { get; private set; }

    internal Point Position { get; set; }
    internal Point Velocity { get; set; }

    internal bool IsScannedByMe { get; set; }
    internal bool IsScannedByEnemy { get; set; }

    internal Creature(int id, int color, int type)
    {
        Id = id;
        Color = color;
        Type = type;
    }
}


internal class DistanceCalculator
{
    private List<Creature> creatures;
    public DistanceCalculator(List<Creature> allCreatures)
    {
        creatures = allCreatures;
    }

    internal Point GetClosestCreaturePosition(Drone drone, bool unscannedByMe, bool unscannedByEnemy)
    {
        var closest = int.MaxValue;
        var closestId = -1;
        Point closestPosition = new Point(0, 0);

        foreach (var creature in creatures)
        {
            var dist = GetDistance(drone.Position, creature.Position);

            if(unscannedByMe && creature.IsScannedByMe)
            {
                continue;
            }

            if(unscannedByEnemy && creature.IsScannedByEnemy)
            {
                continue;
            }

            if (dist < closest)
            {
                closest = dist;
                closestId = creature.Id;
                closestPosition = creature.Position;
            }
        }

        return closestPosition;
    }

    private static int GetDistance(Point position1, Point position2)
    {
        var dx = position1.X - position2.X;
        var dy = position1.Y - position2.Y;
        return (int)Math.Sqrt(dx * dx + dy * dy);
    }
}

internal sealed class Drone
{
    internal int Id { get; private set; }

    internal Point Position { get; set; }
    internal int BatteryLevel { get; set; }
    
    internal Drone(int id, int xPos, int yPos, int batteryLevel)
    {
        Id = id;
        Position = new Point(xPos, yPos);
        BatteryLevel = batteryLevel;
    }
}

internal class Game
{
    internal int MyScore { get; set; }
    internal int EnemyScore { get; set; }

    private List<Creature> creatures = [];
    private List<Drone> myDrones = [];
    private List<Drone> enemyDrones = [];

    private DistanceCalculator distanceCalculator;

    internal void InitialiseCreatures(List<Creature> allCreatures)
    {
        creatures = allCreatures;
        distanceCalculator = new DistanceCalculator(creatures);
    }

    internal void AddScannedCreature(int creatureId, bool isMyDrone)
    {
        Creature creature = creatures.Find(c => c.Id == creatureId);
        if (creature != null)
        {
            if (isMyDrone)
            {
                creature.IsScannedByMe = true;
            }
            else
            {
                creature.IsScannedByEnemy = true;
            }
        }
    }

    internal void SetMyDrones(List<Drone> drones)
    {
        myDrones = drones;
    }

    internal void SetEnemyDrones(List<Drone> drones)
    {
        enemyDrones = drones;
    }

    internal void UpdateCreaturePosition(int creatureId, int creatureX, int creatureY, int creatureVx, int creatureVy)
    {
        Creature creature = creatures.Find(c => c.Id == creatureId);
        if (creature != null)
        {
            creature.Position = new Point(creatureX, creatureY);
            creature.Velocity = new Point(creatureVx, creatureVy);
        }
    }

    internal List<string> CalculateActions()
    {
        // First simple pass solution
        // For each drone, move towards the nearest unscanned creature

        var actions = new List<string>();

        for (var i=0; i<myDrones.Count; i++)
        {
            Point pos = distanceCalculator.GetClosestCreaturePosition(myDrones[i], true, true);
            actions.Add($"MOVE {pos.X} {pos.Y} 1 Battery level:{myDrones[i].BatteryLevel}"); // MOVE <x> <y> <light (1|0)> | WAIT <light (1|0)>
        }

        return actions;
    }
}




class Player
{
    static void Main(string[] args)
    {
        var game = new Game();
        
        game.InitialiseCreatures(GetCreatures());

        // game loop
        while (true)
        {
            int myScore = int.Parse(Console.ReadLine());
            game.MyScore = myScore;
            int foeScore = int.Parse(Console.ReadLine());
            game.EnemyScore = foeScore;

            AddScans(game);

            game.SetMyDrones(GetMyDrones());
            game.SetEnemyDrones(GetEnemyDrones());

            // Used in later leagues
            int droneScanCount = int.Parse(Console.ReadLine());
            for (int i = 0; i < droneScanCount; i++)
            {
                string[] inputs = Console.ReadLine().Split(' ');
                int droneId = int.Parse(inputs[0]);
                int creatureId = int.Parse(inputs[1]);
            }

            UpdateCreatures(game);
            
            // Used in later leagues
            int radarBlipCount = int.Parse(Console.ReadLine());
            for (int i = 0; i < radarBlipCount; i++)
            {
                string[] inputs = Console.ReadLine().Split(' ');
                int droneId = int.Parse(inputs[0]);
                int creatureId = int.Parse(inputs[1]);
                string radar = inputs[2];
            }

            List<string> actions = game.CalculateActions();

            foreach (string action in actions)
            {
                Console.WriteLine(action);
            }
        }
    }

    private static List<Creature> GetCreatures()
    {
        int creatureCount = int.Parse(Console.ReadLine());

        List<Creature> creatures = new List<Creature>();

        for (int i = 0; i < creatureCount; i++)
        {
            string[] inputs = Console.ReadLine().Split(' ');
            int creatureId = int.Parse(inputs[0]);
            int color = int.Parse(inputs[1]);
            int type = int.Parse(inputs[2]);

            creatures.Add(new Creature(creatureId, color, type));
        }

        return creatures;
    }

    private static void AddScans(Game game)
    {
        int myScanCount = int.Parse(Console.ReadLine());
        for (int i = 0; i < myScanCount; i++)
        {
            int creatureId = int.Parse(Console.ReadLine());
            game.AddScannedCreature(creatureId, true);
        }
        int foeScanCount = int.Parse(Console.ReadLine());
        for (int i = 0; i < foeScanCount; i++)
        {
            int creatureId = int.Parse(Console.ReadLine());
            game.AddScannedCreature(creatureId, false);
        }
    }

    private static List<Drone> GetMyDrones()
    {
        int myDroneCount = int.Parse(Console.ReadLine());
        var myDrones = new List<Drone>();

        for (int i = 0; i < myDroneCount; i++)
        {
            string[] inputs = Console.ReadLine().Split(' ');
            int droneId = int.Parse(inputs[0]);
            int droneX = int.Parse(inputs[1]);
            int droneY = int.Parse(inputs[2]);
            int emergency = int.Parse(inputs[3]);
            int battery = int.Parse(inputs[4]);

            myDrones.Add(new Drone(droneId, droneX, droneY, battery));
        }

        return myDrones;
    }

    private static List<Drone> GetEnemyDrones()
    {
        int foeDroneCount = int.Parse(Console.ReadLine());
        var enemyDrones = new List<Drone>();

        for (int i = 0; i < foeDroneCount; i++)
        {
            string[] inputs = Console.ReadLine().Split(' ');
            int droneId = int.Parse(inputs[0]);
            int droneX = int.Parse(inputs[1]);
            int droneY = int.Parse(inputs[2]);
            int emergency = int.Parse(inputs[3]);
            int battery = int.Parse(inputs[4]);

            enemyDrones.Add(new Drone(droneId, droneX, droneY, battery));
        }

        return enemyDrones;
    }

    private static void UpdateCreatures(Game game)
    {
        int visibleCreatureCount = int.Parse(Console.ReadLine());
        for (int i = 0; i < visibleCreatureCount; i++)
        {
            string[] inputs = Console.ReadLine().Split(' ');
            int creatureId = int.Parse(inputs[0]);
            int creatureX = int.Parse(inputs[1]);
            int creatureY = int.Parse(inputs[2]);
            int creatureVx = int.Parse(inputs[3]);
            int creatureVy = int.Parse(inputs[4]);

            game.UpdateCreaturePosition(creatureId, creatureX, creatureY, creatureVx, creatureVy);
        }
    }
}


